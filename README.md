# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Веб-приложение для покупки продуктов

Веб-приложение для покупки различных интересных продуктов. Приложение состоит из следующих основных компонентов: модели, представления и презентеры.

## Архитектура проекта

- **Основные части архитектуры**: модель данных, API-клиент и компоненты представления. Принцип MVP (Model-View-Presenter) основан на разделении приложения на три основных компонента: модель (Model), представление (View) и презентер (Presenter). Модель отвечает за данные и бизнес-логику, представление — за отображение данных пользователю, а презентер — за управление взаимодействием между моделью и представлением.

- **Назначение частей**:
  - **Модель данных**: хранение информации о товарах, корзине, заказах и пользователях, а также обеспечение структурированного доступа и управления этой информацией.
  - **API-клиент**: удобный интерфейс для взаимодействия с удаленным API, обеспечивая получение и отправку данных.
  - **Компоненты представления**: отображение данных и обеспечение пользовательского интерфейса для взаимодействия с приложением.

- **Взаимодействие частей**: через методы и события. Например, компоненты представления взаимодействуют с моделью данных через методы добавления и удаления товаров из корзины, а также через события, которые инициируются при определенных действиях пользователя.

- **Компоненты приложения**: классы моделей данных (Product, Basket, Order), классы API-клиента и компоненты представления (например, список товаров, корзина, форма оформления заказа).

- **Процессы в приложении**: реализованы через события, используя класс "Брокер событий" (EventEmitter). Этот класс обеспечивает механизм для обработки событийного взаимодействия в приложении, позволяя устанавливать обработчики на конкретные события, инициировать события и управлять взаимодействием между компонентами через событийную систему.

## Описание данных

### Интерфейс товаров (IProduct)

Определяет структуру объектов, представляющих товары.

- `id`: Уникальный идентификатор товара (строка).
- `description`: Описание товара (строка).
- `image`: URL изображения товара (строка).
- `title`: Название товара (строка).
- `category`: Категория товара (строка).
- `price`: Цена товара (число или null).

### Интерфейс корзины (IBasket)

- `items`: Массив товаров в корзине (массив объектов типа IProduct).
- `add(product: IProduct)`: Метод для добавления товара в корзину.
- `remove(id: string)`: Метод для удаления товара из корзины по его идентификатору.

### Интерфейс заказа (IOrder)

Определяет структуру объектов, представляющих заказ.

- `paymentMethod`: Метод оплаты заказа (строка).
- `address`: Адрес доставки (строка).
- `email`: Email адрес заказчика (строка).
- `telephone`: Номер телефона заказчика (строка).

### Интерфейс пользователя (IUser)

Определяет структуру объектов, предоставляющие данные о пользователе

- `email`: Email адрес пользователя (строка).
- `telephone`: Номер телефона пользователя (строка).

## API-клиент

API-клиент предоставляет удобный интерфейс для взаимодействия с удаленным API.

### Методы

- `get(uri: string): Promise<object>`: Отправляет GET-запрос к указанному ресурсу.
  - Параметры: `uri` (строка) - URI ресурса.
  - Возвращаемое значение: Promise, который разрешается в объект с данными ответа.
- `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>`: Отправляет POST-запрос к указанному ресурсу.
  - Параметры: `uri` (строка) - URI ресурса.
  - `data` (объект) - данные для отправки.
  - `method` ('POST' | 'PUT' | 'DELETE') - метод запроса (по умолчанию 'POST').
  - Возвращаемое значение: Promise, который разрешается в объект с данными ответа.

### Типы данных

- `ApiListResponse<Type>`: Общий тип данных, представляющий ответ от API, который включает в себя общее количество элементов и массив элементов указанного типа.
  - `type ApiListResponse<Type> = { total: number, items: Type[] };`
- `ApiPostMethods`: Тип данных, который ограничивает методы запроса для POST-запросов, PUT-запросов и DELETE-запросов.
  - `type ApiPostMethods = 'POST' | 'PUT' | 'DELETE';`

## Классы моделей данных

### Класс "Товар" (Product)

#### Состав

- `id`: Уникальный идентификатор товара (строка).
- `description`: Описание товара (строка).
- `image`: URL изображения товара (строка).
- `title`: Название товара (строка).
- `category`: Категория товара (строка).
- `price`: Цена товара (число или null).

#### Назначение

Этот класс предназначен для хранения информации о товарах в системе. Он обеспечивает структурированное представление данных о товаре, включая его основные характеристики, такие как описание, изображение, название, категория и цена.

### Класс "Корзина" (Basket)

#### Состав

- `items`: Массив товаров в корзине (массив объектов типа Product).

#### Методы

- `add(product: IProduct)`: Добавляет товар в корзину по его идентификатору.
- `remove(id: string)`: Удаляет товар из корзины по его идентификатору.

#### Назначение

Этот класс предназначен для хранения и управления товарами, добавленными в корзину пользователем. Он предоставляет методы для добавления и удаления товаров из корзины, а также обеспечивает доступ к текущему списку товаров в корзине.

### Класс "Заказ" (Order)

#### Состав

- `paymentMethod`: Метод оплаты заказа (строка).
- `address`: Адрес доставки (строка).
- `email`: Email адрес заказчика (строка).
- `telephone`: Номер телефона заказчика (строка).

#### Назначение

Этот класс предназначен для хранения информации о заказах в системе. Он содержит основные данные о заказе, такие как метод оплаты, адрес доставки, контактная информация заказчика.

### Класс "Брокер событий" (EventEmitter)

Этот класс представляет собой реализацию брокера событий для обработки событий в приложении.

#### Публичные методы

- `on(eventName: EventName, callback: (data: T) => void): void`: Устанавливает обработчик на событие. Принимает имя события и функцию обратного вызова, которая будет выполнена при возникновении события.
- `off(eventName: EventName, callback: Subscriber): void`: Снимает обработчик с события. Принимает имя события и функцию обратного вызова, которая была установлена как обработчик.
- `emit(eventName: string, data?: T): void`: Инициирует событие с передачей данных. Принимает имя события и, опционально, данные, которые будут переданы в обработчики события.
- `onAll(callback: (event: EmitterEvent) => void): void`: Подписывается на все события. Принимает функцию обратного вызова, которая будет вызвана при возникновении любого события.
- `offAll(): void`: Снимает все обработчики событий. Очищает список обработчиков для всех событий.
- `trigger(eventName: string, context?: Partial<T>): (data: T) => void`: Создает триггер, генерирующий событие при вызове. Возвращает функцию, которая при вызове инициирует событие с указанным именем и переданным контекстом данных.

#### Примечания

- Для удобства использования простые типы данных вынесены в алиасы: EventName (строка или RegExp), Subscriber (функция), EmitterEvent (объект события).
- Этот класс позволяет устанавливать и снимать обработчики на конкретные события, а также на все события или по шаблону события.
- Класс обеспечивает гибкую возможность инициировать события с передачей данных.
- Метод `trigger` позволяет создавать триггеры для удобного генерирования событий с определенными данными и контекстом.
- Этот класс является основным инструментом для организации взаимодействия между компонентами приложения через событийную систему. Он обеспечивает простой и гибкий способ управления событиями и их обработчиками.

## Классы представления

### Базовый класс представления (Component)

Этот класс является базовым для всех классов представления в приложении.

#### Методы

- `render()`: Метод для отображения компонента.

#### Примечания

- Классы представления, такие как Modal, Basket, Form, Success, наследуют от этого базового класса.

### Класс Modal

#### Наследуется от

- `Component`

#### Назначение

Представляет модальные окна в приложении.

#### Методы

- `open()`: Метод для открытия модального окна.
- `close()`: Метод для закрытия модального окна.

### Класс Basket

#### Наследуется от

- `Component`

#### Назначение

Отображает корзину с товарами и управляет ее содержимым.

#### Методы

- `render()`: Переопределенный метод для отображения корзины.
- `addItem(product: IProduct)`: Метод для добавления товара в корзину.
- `removeItem(id: string)`: Метод для удаления товара из корзины.

### Класс Form

#### Наследуется от

- `Component`

#### Назначение

Отображает формы для ввода информации пользователем.

#### Методы

- `render()`: Переопределенный метод для отображения формы.
- `submit()`: Метод для обработки отправки формы.

### Класс Success

#### Наследуется от

- `Component`

#### Назначение

Отображает страницу успеха после успешного завершения действия, например, оформления заказа.

#### Методы

- `render()`: Переопределенный метод для отображения страницы успеха.

### Класс Page

#### Наследуется от

- `Component`

#### Назначение

Отображает основную страницу приложения.

#### Методы

- `render()`: Переопределенный метод для отображения основной страницы.

### Класс Card

#### Наследуется от

- `Component`

#### Назначение

Отображает карточку товара.

#### Методы

- `render()`: Переопределенный метод для отображения карточки товара.

### Класс Order

#### Наследуется от

- `Component`

#### Назначение

Отображает информацию о заказе.

#### Методы

- `render()`: Переопределенный метод для отображения информации о заказе.

### Класс Contacts

#### Наследуется от

- `Component`

#### Назначение

Отображает контактную информацию.

#### Методы

- `render()`: Переопределенный метод для отображения контактной информации.

## Взаимодействие компонентов

### Класс "Товар" (Product) и Класс "Корзина" (Basket)

- Класс "Корзина" содержит массив items, в котором хранятся объекты типа "Товар".
- Пользователь может добавлять товары в корзину, используя метод `add(product: IProduct)` класса "Корзина".
- Для удаления товаров из корзины можно использовать метод `remove(id: string)` класса "Корзина".

### Класс "Заказ" (Order) и Класс "Пользователь" (User)

- Класс "Заказ" содержит информацию о заказе, включая метод оплаты, адрес доставки, email и номер телефона заказчика.
- Класс "Пользователь" предоставляет информацию о пользователе, такую как email и номер телефона.
- При оформлении заказа информация о пользователе может использоваться для заполнения соответствующих полей заказа.

### API-клиент

- API-клиент предоставляет удобный интерфейс для взаимодействия с удаленным API.
- Он позволяет отправлять GET- и POST-запросы к указанным ресурсам для получения данных и отправки данных соответственно.
- Классы "Товар", "Корзина", "Заказ" и "Пользователь" могут использовать методы API-клиента для взаимодействия с удаленным API.

### Класс "Брокер событий" (EventEmitter)

- Брокер событий обеспечивает механизм для обработки событийного взаимодействия в приложении.
- Он позволяет устанавливать обработчики на конкретные события, инициировать события и управлять взаимодействием между компонентами приложения через событийную систему.
- Классы "Товар", "Корзина", "Заказ" и "Пользователь" могут использовать брокер событий для уведомления других компонентов о различных событиях, таких как добавление товара в корзину или оформление заказа.

## Компоненты

### Компоненты представления

1. **Компонент "Список товаров"**:
   - Отображает список доступных товаров, их описание, изображения и цены. Позволяет пользователю выбирать товары для добавления в корзину.

2. **Компонент "Корзина"**:
   - Отображает товары, добавленные в корзину, и позволяет пользователю управлять этими товарами (добавлять, удалять, изменять количество). Отображает общую стоимость заказа.

3. **Компонент "Форма оформления заказа"**:
   - Предоставляет пользователю форму для ввода информации о заказе, такой как адрес доставки, метод оплаты и контактные данные.

4. **Компонент "Страница заказа"**:
   - Отображает подтверждение заказа со всей введенной пользователем информацией. Позволяет пользователю подтвердить заказ или вернуться и изменить информацию.